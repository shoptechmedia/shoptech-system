[2016-06-07 16:09:58] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1
[2016-06-07 16:09:58] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                    GROUP BY si.id_product  HAVING (terms LIKE "%robe%")ORDER BY position  desc LIMIT 0,10
[2016-06-07 16:09:58] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%robe%") ORDER BY position  LIMIT 0,16
[2016-06-07 16:09:58] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(5,3,4,6,7,2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-06-07 16:10:14] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1
[2016-06-07 16:10:14] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                    GROUP BY si.id_product  HAVING (terms LIKE "%robe%")ORDER BY position  desc LIMIT 0,10
[2016-06-07 16:10:14] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%robe%") ORDER BY position  LIMIT 0,16
[2016-06-07 16:10:14] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(5,3,4,6,7,2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-06-07 16:10:27] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1
[2016-06-07 16:10:27] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                    GROUP BY si.id_product  HAVING (terms LIKE "%robe%")ORDER BY position  desc LIMIT 0,10
[2016-06-07 16:10:27] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%robe%") ORDER BY position  LIMIT 0,16
[2016-06-07 16:10:27] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(5,3,4,6,7,2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-06-07 16:10:38] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1
[2016-06-07 16:10:38] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                    GROUP BY si.id_product  HAVING (terms LIKE "%robe%")ORDER BY position  desc LIMIT 0,10
[2016-06-07 16:10:38] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%robe%") ORDER BY position  LIMIT 0,16
[2016-06-07 16:10:38] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(5,3,4,6,7,2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-06-07 16:10:59] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1
[2016-06-07 16:10:59] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                    GROUP BY si.id_product  HAVING (terms LIKE "%robe%")ORDER BY position  desc LIMIT 0,10
[2016-06-07 16:10:59] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%robe%") ORDER BY position  LIMIT 0,16
[2016-06-07 16:10:59] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(5,3,4,6,7,2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-06-07 16:38:50] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1
[2016-06-07 16:38:50] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                    GROUP BY si.id_product  HAVING (terms LIKE "%robe%")ORDER BY position  desc LIMIT 0,10
[2016-06-07 16:38:50] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%robe%") ORDER BY position  LIMIT 0,16
[2016-06-07 16:38:50] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(5,3,4,6,7,2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-06-08 10:34:27] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1
[2016-06-08 10:34:27] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                    GROUP BY si.id_product  HAVING (terms LIKE "%robe%")ORDER BY position  desc LIMIT 0,10
[2016-06-08 10:34:27] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%robe%") ORDER BY position  LIMIT 0,16
[2016-06-08 10:34:27] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(5,3,4,6,7,2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-06-16 17:26:33] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1
[2016-06-16 17:26:33] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)) OR (sw.id_word IN(619,772,689,842,3133,3515,3212,3594,3291,3673)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                    GROUP BY si.id_product  HAVING (terms LIKE "%robe%") AND (terms LIKE "%imprimee%")ORDER BY position  desc LIMIT 0,10
[2016-06-16 17:26:33] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(43,30,209,196,130,113,296,279,2349,2332,2776,2759,2436,2419,2863,2846,2523,2506,2950,2933)) OR (sw.id_word IN(619,772,689,842,3133,3515,3212,3594,3291,3673)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` = 1)
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%robe%") AND (terms LIKE "%imprimee%") ORDER BY position  LIMIT 0,16
[2016-06-16 17:26:33] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(5,3,4,7,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-07-13 14:21:30] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-13 14:21:30] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(24650,25099,24733,25182,24826,25273,24917,25364,25008,25455)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%bbbb%")ORDER BY position  desc LIMIT 0,10
[2016-07-13 14:21:30] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(24650,25099,24733,25182,24826,25273,24917,25364,25008,25455)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%bbbb%") ORDER BY position  LIMIT 0,16
[2016-07-13 14:21:30] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(1)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-07-13 14:21:46] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-13 14:21:46] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(24650,25099,24733,25182,24826,25273,24917,25364,25008,25455)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%bbbb%")ORDER BY position  desc LIMIT 0,10
[2016-07-13 14:21:46] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(24650,25099,24733,25182,24826,25273,24917,25364,25008,25455)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%bbbb%") ORDER BY position  LIMIT 0,16
[2016-07-13 14:21:46] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(1)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-07-13 14:21:49] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-13 14:21:49] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(23764,24211,23846,24293,23938,24383,24028,24473,24118,24563)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%aaaa%")ORDER BY position  desc LIMIT 0,10
[2016-07-13 14:21:49] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(23764,24211,23846,24293,23938,24383,24028,24473,24118,24563)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%aaaa%") ORDER BY position  LIMIT 0,16
[2016-07-13 14:21:49] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(1)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-07-13 14:21:59] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-13 14:21:59] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(24650,25099,24733,25182,24826,25273,24917,25364,25008,25455)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%bbbb%")ORDER BY position  desc LIMIT 0,10
[2016-07-13 14:21:59] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(24650,25099,24733,25182,24826,25273,24917,25364,25008,25455)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%bbbb%") ORDER BY position  LIMIT 0,16
[2016-07-13 14:21:59] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(1)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-07-18 09:45:52] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-18 09:45:57] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-18 09:45:57] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%misier%")ORDER BY position  desc LIMIT 0,10
[2016-07-18 09:45:57] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%misier%") ORDER BY position  LIMIT 0,16
[2016-07-18 09:45:57] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-07-18 09:46:06] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-18 09:46:06] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(18,1,70,184,167,236,99,80,161,265,246,327,2318,2299,2380,2745,2726,2807,2405,2386,2467,2832,2813,2894,2492,2473,2554,2919,2900,2981)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%shi%")ORDER BY position  desc LIMIT 0,10
[2016-07-18 09:46:06] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(18,1,70,184,167,236,99,80,161,265,246,327,2318,2299,2380,2745,2726,2807,2405,2386,2467,2832,2813,2894,2492,2473,2554,2919,2900,2981)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%shi%") ORDER BY position  LIMIT 0,16
[2016-07-18 09:46:06] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(1,2,3,4,5,6,7)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-07-18 09:46:07] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-18 09:46:07] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 546

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(18,1,70,184,167,236,99,80,161,18695,265,246,327,2318,2299,2380,2745,2726,2807,2405,2386,2467,2832,2813,2894,2492,2473,2554,2919,2900,2981)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%sh%")ORDER BY position  desc LIMIT 0,10
[2016-07-18 09:46:07] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 578

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(18,1,70,184,167,236,99,80,161,18695,265,246,327,2318,2299,2380,2745,2726,2807,2405,2386,2467,2832,2813,2894,2492,2473,2554,2919,2900,2981)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%sh%") ORDER BY position  LIMIT 0,16
[2016-07-18 09:46:07] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 629
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(1,2,3,4,5,6,7)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-07-18 09:46:15] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-18 09:46:15] levenhstein $request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::applyLevenshtein : 775

                SELECT
                DISTINCT sw.id_word, sw.word
                FROM ps_search_word sw
                LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                WHERE sw.id_lang = 1
                    AND sw.id_shop = 1
                    AND
                        (
                        (sw.word LIKE "%co%" || sw.word LIKE "%coa%"|| sw.word LIKE "%oat%"|| sw.word LIKE "%ats%"|| sw.word LIKE "%ts%%")
                        AND (sw.word LIKE "%coats%" || amb_levenshtein(sw.word, "%coats") < 3)
                    )
[2016-07-18 09:46:16] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-18 09:46:16] levenhstein $request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::applyLevenshtein : 775

                SELECT
                DISTINCT sw.id_word, sw.word
                FROM ps_search_word sw
                LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                WHERE sw.id_lang = 1
                    AND sw.id_shop = 1
                    AND
                        (
                        (sw.word LIKE "%co%" || sw.word LIKE "%coa%"|| sw.word LIKE "%oat%"|| sw.word LIKE "%ats%"|| sw.word LIKE "%ts%%")
                        AND (sw.word LIKE "%coats%" || amb_levenshtein(sw.word, "%coats") < 3)
                    )
[2016-07-18 09:49:41] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-18 09:49:46] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-18 09:49:46] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-18 09:49:56] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-07-18 09:49:57] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 428

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:37:26] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:37:26] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%chemi%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:37:26] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 577

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%chemi%") ORDER BY position  LIMIT 0,16
[2016-08-10 14:37:26] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 628
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:38:11] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:38:11] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%chemi%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:38:11] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 577

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%chemi%") ORDER BY position  LIMIT 0,16
[2016-08-10 14:38:11] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 628
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:39:06] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:39:06] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%chemi%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:39:06] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 577

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%chemi%") ORDER BY position  LIMIT 0,16
[2016-08-10 14:39:06] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 628
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:39:19] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:39:19] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%chemi%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:39:19] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 577

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%chemi%") ORDER BY position  LIMIT 0,16
[2016-08-10 14:39:19] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 628
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:39:21] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:39:21] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%chemi%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:39:21] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 577

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%chemi%") ORDER BY position  LIMIT 0,16
[2016-08-10 14:39:21] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 628
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:39:26] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:39:26] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:39:26] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 577

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%che%") ORDER BY position  LIMIT 0,16
[2016-08-10 14:39:26] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 628
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:39:27] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:39:27] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,12
[2016-08-10 14:39:27] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 577

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%che%") ORDER BY position  LIMIT 0,16
[2016-08-10 14:39:27] if not $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 664
SELECT DISTINCT(p.id_product), p.*, product_shop.*, stock.out_of_stock,
                IFNULL(stock.quantity, 0) as quantity,
                pl.`description_short`, pl.`available_now`, pl.`available_later`, pl.`link_rewrite`, pl.`name`,
             image_shop.`id_image`, il.`legend`, m.`name` manufacturer_name,
             product_attribute_shop.`id_product_attribute`,
                DATEDIFF(
                    p.`date_add`,
                    DATE_SUB(
                        NOW(),
                        INTERVAL 20 DAY
                    )
                ) > 0 new
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_product_attribute` pa ON (p.`id_product` = pa.`id_product`)
                 LEFT JOIN ps_product_attribute_shop product_attribute_shop
		ON (product_attribute_shop.id_product_attribute = pa.id_product_attribute AND product_attribute_shop.id_shop = 1 AND product_attribute_shop.`default_on` = 1)  LEFT JOIN ps_stock_available stock
			ON (stock.id_product = p.id_product AND stock.id_product_attribute = IFNULL(`product_attribute_shop`.id_product_attribute, 0) AND stock.id_shop = 1  AND stock.id_shop_group = 0  )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                    OR (image_shop.id_image IS NULL AND i.cover=1))
                GROUP BY p.id_product
                ORDER BY position  desc
[2016-08-10 14:39:47] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:39:47] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,12
[2016-08-10 14:39:47] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 577

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%che%") ORDER BY position DESC  LIMIT 0,16
[2016-08-10 14:39:47] if not $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 664
SELECT DISTINCT(p.id_product), p.*, product_shop.*, stock.out_of_stock,
                IFNULL(stock.quantity, 0) as quantity,
                pl.`description_short`, pl.`available_now`, pl.`available_later`, pl.`link_rewrite`, pl.`name`,
             image_shop.`id_image`, il.`legend`, m.`name` manufacturer_name,
             product_attribute_shop.`id_product_attribute`,
                DATEDIFF(
                    p.`date_add`,
                    DATE_SUB(
                        NOW(),
                        INTERVAL 20 DAY
                    )
                ) > 0 new
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_product_attribute` pa ON (p.`id_product` = pa.`id_product`)
                 LEFT JOIN ps_product_attribute_shop product_attribute_shop
		ON (product_attribute_shop.id_product_attribute = pa.id_product_attribute AND product_attribute_shop.id_shop = 1 AND product_attribute_shop.`default_on` = 1)  LEFT JOIN ps_stock_available stock
			ON (stock.id_product = p.id_product AND stock.id_product_attribute = IFNULL(`product_attribute_shop`.id_product_attribute, 0) AND stock.id_shop = 1  AND stock.id_shop_group = 0  )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                    OR (image_shop.id_image IS NULL AND i.cover=1))
                GROUP BY p.id_product
                ORDER BY position  desc
[2016-08-10 14:39:51] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:39:51] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,12
[2016-08-10 14:39:51] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 577

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%che%") ORDER BY position DESC  LIMIT 0,16
[2016-08-10 14:39:51] if not $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 664
SELECT DISTINCT(p.id_product), p.*, product_shop.*, stock.out_of_stock,
                IFNULL(stock.quantity, 0) as quantity,
                pl.`description_short`, pl.`available_now`, pl.`available_later`, pl.`link_rewrite`, pl.`name`,
             image_shop.`id_image`, il.`legend`, m.`name` manufacturer_name,
             product_attribute_shop.`id_product_attribute`,
                DATEDIFF(
                    p.`date_add`,
                    DATE_SUB(
                        NOW(),
                        INTERVAL 20 DAY
                    )
                ) > 0 new
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_product_attribute` pa ON (p.`id_product` = pa.`id_product`)
                 LEFT JOIN ps_product_attribute_shop product_attribute_shop
		ON (product_attribute_shop.id_product_attribute = pa.id_product_attribute AND product_attribute_shop.id_shop = 1 AND product_attribute_shop.`default_on` = 1)  LEFT JOIN ps_stock_available stock
			ON (stock.id_product = p.id_product AND stock.id_product_attribute = IFNULL(`product_attribute_shop`.id_product_attribute, 0) AND stock.id_shop = 1  AND stock.id_shop_group = 0  )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                    OR (image_shop.id_image IS NULL AND i.cover=1))
                GROUP BY p.id_product
                ORDER BY position  desc
[2016-08-10 14:39:56] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:39:56] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:39:56] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 577

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%che%") ORDER BY position DESC  LIMIT 0,16
[2016-08-10 14:39:56] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 628
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:39:59] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:39:59] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,12
[2016-08-10 14:39:59] $categories_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 577

                        SELECT
                        product_shop.id_category_default, pscl.*, SUM(si.weight) position,
                        GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                        FROM ps_search_word sw
                        LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                         LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1)
                        INNER JOIN ps_category psc ON psc.id_category=id_category_default
                            AND psc.active = 1
                         INNER JOIN ps_category_shop category_shop
		ON (category_shop.id_category = psc.id_category AND category_shop.id_shop = 1)
                        INNER JOIN ps_category_lang pscl ON pscl.id_category=psc.id_category
                            AND pscl.id_lang=1
                            AND pscl.id_shop = 1
                        WHERE sw.id_lang = 1
                            AND sw.id_shop = 1
                            AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                            AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                        GROUP BY product_shop.id_category_default HAVING (terms LIKE "%che%") ORDER BY position DESC  LIMIT 0,16
[2016-08-10 14:39:59] if not $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 664
SELECT DISTINCT(p.id_product), p.*, product_shop.*, stock.out_of_stock,
                IFNULL(stock.quantity, 0) as quantity,
                pl.`description_short`, pl.`available_now`, pl.`available_later`, pl.`link_rewrite`, pl.`name`,
             image_shop.`id_image`, il.`legend`, m.`name` manufacturer_name,
             product_attribute_shop.`id_product_attribute`,
                DATEDIFF(
                    p.`date_add`,
                    DATE_SUB(
                        NOW(),
                        INTERVAL 20 DAY
                    )
                ) > 0 new
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_product_attribute` pa ON (p.`id_product` = pa.`id_product`)
                 LEFT JOIN ps_product_attribute_shop product_attribute_shop
		ON (product_attribute_shop.id_product_attribute = pa.id_product_attribute AND product_attribute_shop.id_shop = 1 AND product_attribute_shop.`default_on` = 1)  LEFT JOIN ps_stock_available stock
			ON (stock.id_product = p.id_product AND stock.id_product_attribute = IFNULL(`product_attribute_shop`.id_product_attribute, 0) AND stock.id_shop = 1  AND stock.id_shop_group = 0  )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                    OR (image_shop.id_image IS NULL AND i.cover=1))
                GROUP BY p.id_product
                ORDER BY position  desc
[2016-08-10 14:40:26] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 427

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:40:26] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 545

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,12
[2016-08-10 14:40:26] if not $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 631
SELECT DISTINCT(p.id_product), p.*, product_shop.*, stock.out_of_stock,
                IFNULL(stock.quantity, 0) as quantity,
                pl.`description_short`, pl.`available_now`, pl.`available_later`, pl.`link_rewrite`, pl.`name`,
             image_shop.`id_image`, il.`legend`, m.`name` manufacturer_name,
             product_attribute_shop.`id_product_attribute`,
                DATEDIFF(
                    p.`date_add`,
                    DATE_SUB(
                        NOW(),
                        INTERVAL 20 DAY
                    )
                ) > 0 new
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_product_attribute` pa ON (p.`id_product` = pa.`id_product`)
                 LEFT JOIN ps_product_attribute_shop product_attribute_shop
		ON (product_attribute_shop.id_product_attribute = pa.id_product_attribute AND product_attribute_shop.id_shop = 1 AND product_attribute_shop.`default_on` = 1)  LEFT JOIN ps_stock_available stock
			ON (stock.id_product = p.id_product AND stock.id_product_attribute = IFNULL(`product_attribute_shop`.id_product_attribute, 0) AND stock.id_shop = 1  AND stock.id_shop_group = 0  )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                    OR (image_shop.id_image IS NULL AND i.cover=1))
                GROUP BY p.id_product
                ORDER BY position  desc
[2016-08-10 14:45:57] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 431

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:45:57] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 549

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,12
[2016-08-10 14:45:57] if not $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 635
SELECT DISTINCT(p.id_product), p.*, product_shop.*, stock.out_of_stock,
                IFNULL(stock.quantity, 0) as quantity,
                pl.`description_short`, pl.`available_now`, pl.`available_later`, pl.`link_rewrite`, pl.`name`,
             image_shop.`id_image`, il.`legend`, m.`name` manufacturer_name,
             product_attribute_shop.`id_product_attribute`,
                DATEDIFF(
                    p.`date_add`,
                    DATE_SUB(
                        NOW(),
                        INTERVAL 20 DAY
                    )
                ) > 0 new
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_product_attribute` pa ON (p.`id_product` = pa.`id_product`)
                 LEFT JOIN ps_product_attribute_shop product_attribute_shop
		ON (product_attribute_shop.id_product_attribute = pa.id_product_attribute AND product_attribute_shop.id_shop = 1 AND product_attribute_shop.`default_on` = 1)  LEFT JOIN ps_stock_available stock
			ON (stock.id_product = p.id_product AND stock.id_product_attribute = IFNULL(`product_attribute_shop`.id_product_attribute, 0) AND stock.id_shop = 1  AND stock.id_shop_group = 0  )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                    OR (image_shop.id_image IS NULL AND i.cover=1))
                GROUP BY p.id_product
                ORDER BY position  desc
[2016-08-10 14:46:00] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 431

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:46:00] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 549

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:46:00] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 599
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:46:05] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 431

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:46:05] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 549

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%chemi%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:46:05] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 599
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:46:45] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:46:45] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%chemi%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:46:45] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:47:03] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:47:03] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%chemi%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:47:03] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:47:19] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:47:19] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%chemi%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:47:19] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:47:21] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:47:21] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,10
[2016-08-10 14:47:21] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:47:52] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:47:52] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,20
[2016-08-10 14:47:52] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:47:53] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:47:53] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,12
[2016-08-10 14:47:53] if not $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 636
SELECT DISTINCT(p.id_product), p.*, product_shop.*, stock.out_of_stock,
                IFNULL(stock.quantity, 0) as quantity,
                pl.`description_short`, pl.`available_now`, pl.`available_later`, pl.`link_rewrite`, pl.`name`,
             image_shop.`id_image`, il.`legend`, m.`name` manufacturer_name,
             product_attribute_shop.`id_product_attribute`,
                DATEDIFF(
                    p.`date_add`,
                    DATE_SUB(
                        NOW(),
                        INTERVAL 20 DAY
                    )
                ) > 0 new
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_product_attribute` pa ON (p.`id_product` = pa.`id_product`)
                 LEFT JOIN ps_product_attribute_shop product_attribute_shop
		ON (product_attribute_shop.id_product_attribute = pa.id_product_attribute AND product_attribute_shop.id_shop = 1 AND product_attribute_shop.`default_on` = 1)  LEFT JOIN ps_stock_available stock
			ON (stock.id_product = p.id_product AND stock.id_product_attribute = IFNULL(`product_attribute_shop`.id_product_attribute, 0) AND stock.id_shop = 1  AND stock.id_shop_group = 0  )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                    OR (image_shop.id_image IS NULL AND i.cover=1))
                GROUP BY p.id_product
                ORDER BY position  desc
[2016-08-10 14:47:55] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:47:55] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,20
[2016-08-10 14:47:55] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:48:53] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:48:53] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,12
[2016-08-10 14:48:53] if not $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 636
SELECT DISTINCT(p.id_product), p.*, product_shop.*, stock.out_of_stock,
                IFNULL(stock.quantity, 0) as quantity,
                pl.`description_short`, pl.`available_now`, pl.`available_later`, pl.`link_rewrite`, pl.`name`,
             image_shop.`id_image`, il.`legend`, m.`name` manufacturer_name,
             product_attribute_shop.`id_product_attribute`,
                DATEDIFF(
                    p.`date_add`,
                    DATE_SUB(
                        NOW(),
                        INTERVAL 20 DAY
                    )
                ) > 0 new
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_product_attribute` pa ON (p.`id_product` = pa.`id_product`)
                 LEFT JOIN ps_product_attribute_shop product_attribute_shop
		ON (product_attribute_shop.id_product_attribute = pa.id_product_attribute AND product_attribute_shop.id_shop = 1 AND product_attribute_shop.`default_on` = 1)  LEFT JOIN ps_stock_available stock
			ON (stock.id_product = p.id_product AND stock.id_product_attribute = IFNULL(`product_attribute_shop`.id_product_attribute, 0) AND stock.id_shop = 1  AND stock.id_shop_group = 0  )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                    OR (image_shop.id_image IS NULL AND i.cover=1))
                GROUP BY p.id_product
                ORDER BY position  desc
[2016-08-10 14:48:56] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:48:56] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,12
[2016-08-10 14:48:56] if not $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 636
SELECT DISTINCT(p.id_product), p.*, product_shop.*, stock.out_of_stock,
                IFNULL(stock.quantity, 0) as quantity,
                pl.`description_short`, pl.`available_now`, pl.`available_later`, pl.`link_rewrite`, pl.`name`,
             image_shop.`id_image`, il.`legend`, m.`name` manufacturer_name,
             product_attribute_shop.`id_product_attribute`,
                DATEDIFF(
                    p.`date_add`,
                    DATE_SUB(
                        NOW(),
                        INTERVAL 20 DAY
                    )
                ) > 0 new
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_product_attribute` pa ON (p.`id_product` = pa.`id_product`)
                 LEFT JOIN ps_product_attribute_shop product_attribute_shop
		ON (product_attribute_shop.id_product_attribute = pa.id_product_attribute AND product_attribute_shop.id_shop = 1 AND product_attribute_shop.`default_on` = 1)  LEFT JOIN ps_stock_available stock
			ON (stock.id_product = p.id_product AND stock.id_product_attribute = IFNULL(`product_attribute_shop`.id_product_attribute, 0) AND stock.id_shop = 1  AND stock.id_shop_group = 0  )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                    OR (image_shop.id_image IS NULL AND i.cover=1))
                GROUP BY p.id_product
                ORDER BY position  desc
[2016-08-10 14:49:05] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:49:05] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,20
[2016-08-10 14:49:05] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:49:09] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:49:09] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%chemi%")ORDER BY position  desc LIMIT 0,20
[2016-08-10 14:49:09] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:49:51] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:49:51] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,476,480,399,403,542,546,7108,7112,7487,7491,7186,7190,7565,7569,7264,7268,7643,7647)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%chemi%")ORDER BY position  desc LIMIT 0,20
[2016-08-10 14:49:51] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:49:53] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:49:53] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,20
[2016-08-10 14:49:53] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:50:38] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:50:38] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,20
[2016-08-10 14:50:38] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:51:01] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:51:01] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,20
[2016-08-10 14:51:01] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
[2016-08-10 14:51:09] $eligible_products_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 432

                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    
[2016-08-10 14:51:09] $main_request
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 550

                    SELECT
                    SQL_CALC_FOUND_ROWS
                    si.id_product, SUM(si.weight) position, GROUP_CONCAT(sw.word SEPARATOR ' ') as terms
                    FROM ps_search_word sw
                    LEFT JOIN ps_search_index si ON sw.id_word = si.id_word
                     LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = si.id_product AND product_shop.id_shop = 1) WHERE  sw.id_shop = 1 AND ((sw.id_word IN(333,337,3,476,480,169,399,403,82,542,546,248,7108,7112,2301,7487,7491,2728,7186,7190,2388,7565,7569,2815,7264,7268,2475,7643,7647,2902)))
                        AND si.id_product IN(
                SELECT
                DISTINCT cp.`id_product`
                FROM `ps_category_group` cg
                INNER JOIN `ps_category_product` cp ON cp.`id_category` = cg.`id_category`
                INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category`
                INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product`
                 LEFT JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                WHERE c.`active` = 1
                    AND product_shop.`active` = 1
                    AND product_shop.`visibility` IN ("both", "search")
                    AND product_shop.indexed = 1
                    AND cg.`id_group` IN (
                        SELECT id_group FROM ps_customer_group
                        WHERE id_customer = 2
                    )
                    )
                    GROUP BY si.id_product  HAVING (terms LIKE "%che%")ORDER BY position  desc LIMIT 0,20
[2016-08-10 14:51:09] if $ajax $sql
Logged from : /Users/Shared/www/prestashop_modules/ambjolisearch/controllers/front/jolisearch.php > AmbjolisearchjolisearchModuleFrontController::find : 600
SELECT DISTINCT p.id_product, pl.name pname, cl.name cname,
                    cl.link_rewrite crewrite, pl.link_rewrite prewrite, pl.link_rewrite link_rewrite,
                    m.`name` mname, m.`id_manufacturer` manid, cs.id_category as catid,
                    product_shop.show_price show_price,
                    p.out_of_stock out_of_stock, product_shop.id_category_default as id_category_default, p.ean13 ean13,
                    image_shop.`id_image` imgid
                FROM ps_product p
                 INNER JOIN ps_product_shop product_shop
		ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1)
                INNER JOIN `ps_product_lang` pl ON (
                    p.`id_product` = pl.`id_product`
                    AND pl.`id_lang` = 1 AND pl.id_shop = 1 
                )
                LEFT JOIN `ps_category_shop` cs ON cs.id_category=product_shop.id_category_default
                    AND cs.id_shop=1
                LEFT JOIN `ps_category` c ON (
                    product_shop.`id_category_default` = c.`id_category`
                    AND c.active=1
                )
                LEFT JOIN `ps_category_lang` cl ON (
                    c.`id_category` = cl.`id_category`
                    AND cl.`id_lang` = 1 AND cl.id_shop = 1 
                )
                LEFT JOIN `ps_manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
                LEFT JOIN `ps_image` i ON (i.`id_product` = p.`id_product`) LEFT JOIN ps_image_shop image_shop
		ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1)
                LEFT JOIN `ps_image_lang` il ON (i.`id_image` = il.`id_image`
                    AND il.`id_lang` = 1)
                WHERE p.`id_product` IN(2,1,4,6)
                AND ((image_shop.id_image IS NOT NULL OR i.id_image IS NULL)
                OR (image_shop.id_image IS NULL AND i.cover=1))
