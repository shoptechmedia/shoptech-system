function WishlistCart(t,i,e,s,a,n){$.ajax({type:"GET",url:baseDir+"modules/blockwishlist/cart.php?rand="+(new Date).getTime(),headers:{"cache-control":"no-cache"},async:!0,cache:!1,data:"action="+i+"&id_product="+e+"&quantity="+a+"&token="+static_token+"&id_product_attribute="+s+"&id_wishlist="+n,success:function(s){"add"==i&&(1==isLogged?(wishlistProductsIdsAdd(e),wishlistRefreshStatus(),$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+added_to_wishlist+"</p>"}],{padding:0}):alert(added_to_wishlist)):$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+loggin_required+"</p>"}],{padding:0}):alert(loggin_required)),"delete"==i&&(wishlistProductsIdsRemove(e),wishlistRefreshStatus()),0!=$("#"+t).length&&($("#"+t).slideUp("normal"),document.getElementById(t).innerHTML=s,$("#"+t).slideDown("normal"))}})}function WishlistChangeDefault(t,i){$.ajax({type:"GET",url:baseDir+"modules/blockwishlist/cart.php?rand="+(new Date).getTime(),headers:{"cache-control":"no-cache"},async:!0,data:"id_wishlist="+i+"&token="+static_token,cache:!1,success:function(i){$("#"+t).slideUp("normal"),document.getElementById(t).innerHTML=i,$("#"+t).slideDown("normal")}})}function WishlistBuyProduct(t,i,e,s,a,n){return n?ajaxCart.add(i,e,!1,a,1,[t,s]):($("#"+s).val(0),WishlistAddProductCart(t,i,e,s),document.forms["addtocart_"+i+"_"+e].method="POST",document.forms["addtocart_"+i+"_"+e].action=baseUri+"?controller=cart",document.forms["addtocart_"+i+"_"+e].elements.token.value=static_token,document.forms["addtocart_"+i+"_"+e].submit()),!0}function WishlistAddProductCart(t,i,e,s){return $("#"+s).val()<=0?!1:($.ajax({type:"GET",url:baseDir+"modules/blockwishlist/buywishlistproduct.php?rand="+(new Date).getTime(),headers:{"cache-control":"no-cache"},data:"token="+t+"&static_token="+static_token+"&id_product="+i+"&id_product_attribute="+e,async:!0,cache:!1,success:function(t){t?$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+t+"</p>"}],{padding:0}):alert(t):$("#"+s).val($("#"+s).val()-1)}}),!0)}function WishlistManage(t,i){$.ajax({type:"GET",async:!0,url:baseDir+"modules/blockwishlist/managewishlist.php?rand="+(new Date).getTime(),headers:{"cache-control":"no-cache"},data:"id_wishlist="+i+"&refresh="+!1,cache:!1,success:function(i){$("#"+t).hide(),document.getElementById(t).innerHTML=i,$("#"+t).fadeIn("slow"),$(".wishlist_change_button").each(function(t){$(this).popover({html:!0,content:function(){return $(this).next(".popover-content").html()}})})}})}function WishlistProductManage(t,i,e,s,a,n,c){$.ajax({type:"GET",async:!0,url:baseDir+"modules/blockwishlist/managewishlist.php?rand="+(new Date).getTime(),headers:{"cache-control":"no-cache"},data:"action="+i+"&id_wishlist="+e+"&id_product="+s+"&id_product_attribute="+a+"&quantity="+n+"&priority="+c+"&refresh="+!0,cache:!1,success:function(t){"delete"==i?$("#wlp_"+s+"_"+a).fadeOut("fast"):"update"==i&&($("#wlp_"+s+"_"+a).fadeOut("fast"),$("#wlp_"+s+"_"+a).fadeIn("fast")),nb_products=0,$("[id^='quantity']").each(function(t,i){nb_products+=parseInt(i.value)}),$("#wishlist_"+e).children("td").eq(1).html(nb_products)}})}function WishlistDelete(t,i,e){var s=confirm(e);return 0==s?!1:"undefined"==typeof mywishlist_url?!1:void $.ajax({type:"GET",async:!0,dataType:"json",url:mywishlist_url,headers:{"cache-control":"no-cache"},cache:!1,data:{rand:(new Date).getTime(),deleted:1,myajax:1,id_wishlist:i,action:"deletelist"},success:function(i){var e=$("#"+t).siblings().length;if($("#"+t).fadeOut("slow").remove(),$("#block-order-detail").html(""),0==e&&$("#block-history").remove(),i.id_default){var s=$("#wishlist_"+i.id_default+" > .wishlist_default");$("#wishlist_"+i.id_default+" > .wishlist_default > a").remove(),s.append('<p class="is_wish_list_default"><i class="icon icon-check-square"></i></p>')}}})}function WishlistDefault(t,i){return"undefined"==typeof mywishlist_url?!1:void $.ajax({type:"GET",async:!0,url:mywishlist_url,headers:{"cache-control":"no-cache"},cache:!1,data:{rand:(new Date).getTime(),"default":1,id_wishlist:i,myajax:1,action:"setdefault"},success:function(i){var e=$(".is_wish_list_default").parents("tr").attr("id"),s=$(".is_wish_list_default").parent();$(".is_wish_list_default").remove(),s.append('<a href="#" onclick="javascript:event.preventDefault();(WishlistDefault(\''+e+"', '"+e.replace("wishlist_","")+'\'));"><i class="icon icon-square"></i></a>');var a=$("#"+t+" > .wishlist_default");$("#"+t+" > .wishlist_default > a").remove(),a.append('<p class="is_wish_list_default"><i class="icon icon-check-square"></i></p>')}})}function WishlistVisibility(t,i){$("#hide"+i).is(":hidden")?($("."+t).slideDown("fast"),$("#show"+i).hide(),$("#hide"+i).css("display","block")):($("."+t).slideUp("fast"),$("#hide"+i).hide(),$("#show"+i).css("display","block"))}function WishlistSend(t,i,e){$.post(baseDir+"modules/blockwishlist/sendwishlist.php",{token:static_token,id_wishlist:i,email1:$("#"+e+"1").val(),email2:$("#"+e+"2").val(),email3:$("#"+e+"3").val(),email4:$("#"+e+"4").val(),email5:$("#"+e+"5").val(),email6:$("#"+e+"6").val(),email7:$("#"+e+"7").val(),email8:$("#"+e+"8").val(),email9:$("#"+e+"9").val(),email10:$("#"+e+"10").val()},function(i){i?$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+i+"</p>"}],{padding:0}):alert(i):WishlistVisibility(t,"hideSendWishlist")})}function wishlistProductsIdsAdd(t){-1==$.inArray(parseInt(t),wishlistProductsIds)&&wishlistProductsIds.push(parseInt(t))}function wishlistProductsIdsRemove(t){wishlistProductsIds.splice($.inArray(parseInt(t),wishlistProductsIds),1)}function wishlistRefreshStatus(){$(".addToWishlist").each(function(){-1!=$.inArray(parseInt($(this).prop("rel")),wishlistProductsIds)?$(this).addClass("checked"):$(this).removeClass("checked")})}function wishlistProductChange(t,i,e,s){if("undefined"==typeof mywishlist_url)return!1;var a=$("#quantity_"+t+"_"+i).val();$.ajax({type:"GET",url:mywishlist_url,headers:{"cache-control":"no-cache"},async:!0,cache:!1,dataType:"json",data:{id_product:t,id_product_attribute:i,quantity:a,priority:$("#priority_"+t+"_"+i).val(),id_old_wishlist:e,id_new_wishlist:s,myajax:1,action:"productchangewishlist"},success:function(n){1==n.success?($("#wlp_"+t+"_"+i).fadeOut("slow"),$("#wishlist_"+e+" td:nth-child(2)").text($("#wishlist_"+e+" td:nth-child(2)").text()-a),$("#wishlist_"+s+" td:nth-child(2)").text(+$("#wishlist_"+s+" td:nth-child(2)").text()+ +a)):$.prototype.fancybox&&$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+n.error+"</p>"}],{padding:0})}})}var wishlistProductsIds=[];$(document).ready(function(){wishlistRefreshStatus(),$("#header .wishlist_top_link").show(),$(document).on("change","select[name=wishlists]",function(){WishlistChangeDefault("wishlist_block_list",$(this).val())}),$("#wishlist_button").popover({html:!0,content:function(){return $("#popover-content").html()}}),$(".wishlist").each(function(){current=$(this),$(this).children(".wishlist_button_list").popover({html:!0,content:function(){return $(this).parent().find(".popover-content").html()}})})});